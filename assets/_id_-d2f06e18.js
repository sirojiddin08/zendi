import{K as S,R as j,m as B,u as I,r as m,o as L,a as J,I as N,b as x,c as h,g as e,t as s,l as P}from"./index-aae41fd2.js";const F={key:0},O={class:"card p-3 mb-2 flex gap-3"},R=e("i",{class:"pi pi-arrow-left"},null,-1),z=[R],V={class:"flex align-items-center gap-3 m-0 p-0"},A={class:"grid grid-nogutter xl:mt-6"},D={class:"col-12 md:col-6 text-center md:text-left flex"},G={class:"",style:{width:"100%"}},H={class:"list-none p-0 m-0",style:{width:"100%"}},K={class:"flex align-items-center py-3 px-2 flex-wrap"},X={class:"w-6 md:w-5 font-medium text-xl p-0 m-0"},Z={class:"w-full md:w-7 md:flex-order-0 flex-order-1 p-0 m-0"},Q={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},Y={class:"w-6 md:w-5 text-xl p-0 m-0"},q={class:"w-full md:w-7 md:flex-order-0 flex-order-1 p-0 m-0"},U={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},W={class:"w-6 md:w-5 text-xl p-0 m-0"},ee={class:"w-full md:w-7 md:flex-order-0 flex-order-1 p-0 m-0"},te={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},se={class:"w-6 md:w-5 text-xl p-0 m-0"},ae={class:"w-full md:w-7 md:flex-order-0 flex-order-1 p-0 m-0"},oe={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},le={class:"w-6 md:w-5 text-xl p-0 m-0"},re={class:"w-full md:w-7 md:flex-order-0 flex-order-1 p-0 m-0"},de={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},ne={class:"w-6 md:w-5 text-xl p-0 m-0"},ie={class:"w-full md:w-7 md:flex-order-0 flex-order-1 p-0 m-0"},ce={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},me={class:"w-6 md:w-5 text-xl p-0 m-0"},pe={class:"w-full md:w-7 md:flex-order-0 flex-order-1 p-0 m-0"},_e={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},ue={class:"w-6 md:w-5 text-xl p-0 m-0"},fe={class:"w-full md:w-7 md:flex-order-0 flex-order-1 p-0 m-0"},xe={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},he={class:"w-6 md:w-5 text-xl p-0 m-0"},we={class:"w-full md:w-7 md:flex-order-0 flex-order-1 p-0 m-0"},be={key:0,class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},ve={class:"w-6 md:w-5 text-xl p-0 m-0"},ge=e("div",{class:"text-900 w-7ull md:w-8 md:flex-order-0 flex-order-1"},null,-1),ye=e("div",{class:"col-12 md:col-6 overflow-hidden profile_file"},[e("div",{id:"map",class:"p-1",style:{height:"100%",position:"relative"}})],-1),$e={key:1},ke={class:"text-center mt-6"},Me=e("i",{class:"pi pi-arrow-left mr-2"},null,-1),Ce="pk.eyJ1Ijoic2lyb2ppZGRpbjc2NzkiLCJhIjoiY2x3OTh5ZThtMDE3dTJrbThmaXFjMHFubyJ9.VB1O3PP2F8aSNjeuhn-ebQ",je={__name:"[id]",setup(Te){const C=S(),T=j();B();const{t:p,locale:Ee}=I();m(!1);const a=m(),_=m(null),u=m([]);m(!1),L(async()=>{var t,r;a.value=await J.get(`/history/alarm-detail/${C.params.id}`),E((t=a.value)==null?void 0:t.data.detail.accepted_lon,(r=a.value)==null?void 0:r.data.detail.accepted_lat)});function E(t,r){const i=async()=>{const d=["https://api.mapbox.com/mapbox-gl-js/v3.4.0/mapbox-gl.js"];for(const l of d)await new Promise((n,c)=>{const o=document.createElement("script");o.src=l,o.onload=n,o.onerror=()=>c(new Error(`Failed to load script ${l}`)),document.head.appendChild(o)})};N(async()=>{if(await i(),typeof mapboxgl>"u"){console.error("Mapbox GL JS failed to load.");return}if(!document.getElementById("map")){console.error("Map container not found!");return}mapboxgl.accessToken=Ce,_.value=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v12",center:[64.0202744,41.6384327],zoom:5.5}),t&&w(t,r),_.value.on("click",l=>{const n=l.lngLat.wrap().lng,c=l.lngLat.wrap().lat;w(n,c)})})}function w(t,r){u.value.forEach(d=>d.remove()),u.value=[],_.value.flyTo({center:[t,r],zoom:12,speed:2.6,curve:1,essential:!0});const i=new mapboxgl.Marker().setLngLat([t,r]).addTo(_.value);u.value.push(i)}function f(t){const r=Math.floor(t/60),i=Math.floor(r/60),d=Math.floor(i/24),l=i%24,n=r%60,c=t%60;let o="";return d>0?o=`${d} ${p("day")}${d>1,""}`:l>0?o=`${l} ${p("hour")}${l>1,""}`:n>0?o=`${n} ${p("minute")}${n>1,""}`:o=`${c} ${p("second")}${c>1,""}`,o}function b(t){T.go(-1)}return(t,r)=>{var i,d,l,n,c,o,v,g,y,$,k,M;return a.value?(x(),h("div",F,[e("div",O,[e("button",{onClick:b,class:"o-button o-button-secondary"},z),e("h3",V,s((i=a.value)==null?void 0:i.data.detail.name),1)]),e("div",A,[e("div",D,[e("div",G,[e("ul",H,[e("li",K,[e("p",X,s(t.$t("address"))+":",1),e("h5",Z,s((d=a.value)==null?void 0:d.data.detail.address),1)]),e("li",Q,[e("p",Y,s(t.$t("plate_number"))+":",1),e("h5",q,s((l=a.value)==null?void 0:l.data.detail.plate_number),1)]),e("li",U,[e("p",W,s(t.$t("card_number"))+":",1),e("h5",ee,s((n=a.value)==null?void 0:n.data.detail.card_number),1)]),e("li",te,[e("p",se,s(t.$t("alarm_time"))+":",1),e("h5",ae,s((c=a.value)==null?void 0:c.data.detail.alarm_time),1)]),e("li",oe,[e("p",le,s(t.$t("accepted_time"))+":",1),e("h5",re,s((o=a.value)==null?void 0:o.data.detail.accepted_time),1)]),e("li",de,[e("p",ne,s(t.$t("reached_time"))+":",1),e("h5",ie,s((v=a.value)==null?void 0:v.data.detail.reached_time),1)]),e("li",ce,[e("p",me,s(t.$t("arrived_time"))+":",1),e("h5",pe,s(f((g=a.value)==null?void 0:g.data.detail.arrived_time)),1)]),e("li",_e,[e("p",ue,s(t.$t("arrival_time"))+":",1),e("h5",fe,s(f((y=a.value)==null?void 0:y.data.detail.arrival_time)),1)]),e("li",xe,[e("p",he,s(t.$t("eleminated_time"))+":",1),e("h5",we,s(f(($=a.value)==null?void 0:$.data.detail.eleminated_time)),1)]),(M=(k=a.value)==null?void 0:k.data.routes)!=null&&M.length?(x(),h("li",be,[e("p",ve,s(t.$t("routes"))+":",1),ge])):P("",!0)])])]),ye])])):(x(),h("div",$e,[e("div",ke,[e("h2",null,s(t.$t("no_data")),1),e("button",{onClick:b,class:"o-button o-button-secondary"},[Me,e("span",null,s(t.$t("back")),1)])])]))}}};export{je as default};
