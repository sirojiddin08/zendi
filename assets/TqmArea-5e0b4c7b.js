import{m as R,u as W,r as c,o as G,a as b,f as m,b as g,c as $,g as e,i as o,n,G as u,t as i,l as I,E as p}from"./index-aae41fd2.js";const J={class:"grid"},K={class:"col-12"},Y={class:"card"},X={class:"my-2"},Z=e("i",{class:"pi pi-upload mr-1"},null,-1),ee=e("i",{class:"pi pi-plus mr-1"},null,-1),te={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},ae={class:"m-0"},le=e("i",{class:"pi pi-search"},null,-1),se={class:"text-center"},oe=e("span",{class:"p-column-title"},"uz",-1),ne=e("span",{class:"p-column-title"},"oz",-1),ie=e("span",{class:"p-column-title"},"ru",-1),de=["onClick"],ue=e("i",{class:"pi pi-pencil"},null,-1),re=[ue],ce=["onClick"],me=e("i",{class:"pi pi-trash mr-1"},null,-1),ve=[me],_e={class:"field grid"},pe={class:"col-6"},fe={for:"oz"},he=e("span",{style:{color:"#ff5050"}},"*",-1),ye={key:0,class:"p-invalid"},be={class:"col-6"},ge={for:"ru"},$e=e("span",{style:{color:"#ff5050"}},"*",-1),ke={key:0,class:"p-invalid"},Ce={class:"field grid"},Ve={class:"col-6"},ze={for:"uz"},we=e("span",{style:{color:"#ff5050"}},"*",-1),Te={key:0,class:"p-invalid"},Ie={class:"flex align-items-center justify-content-center"},Se=e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),qe={key:0},Ue={__name:"TqmArea",setup(Me){const _=R(),{t:d,locale:De}=W(),k=c({global:{value:null,matchMode:p.CONTAINS},name:{value:null,matchMode:p.STARTS_WITH},"country.name":{value:null,matchMode:p.STARTS_WITH},representative:{value:null,matchMode:p.IN},status:{value:null,matchMode:p.EQUALS},verified:{value:null,matchMode:p.EQUALS}}),v=c(!1),f=c(!1),t=c({});c(null);const S=c(null),r=c(!1),C=c(!1),q=c([]);G(async()=>{await V()}),JSON.parse(localStorage.getItem("userData"));async function V(a){try{C.value=!0;let s="/references/tqm-areas";q.value=await b.get(s),C.value=!1}catch{C.value=!1}}const A=()=>{t.value={name1:"",name2:"",name3:""},r.value=!1,v.value=!0},B=()=>{v.value=!1,r.value=!1},F=async()=>{if(r.value=!0,!!t.value.name1&&t.value.name2&&t.value.name3)if(t.value.id)try{await b.put(`/references/tqm-area/${t.value.id}`,t.value),V(t.value.id),_.add({severity:"success",summary:d("status"),detail:d("success"),life:3e3}),v.value=!1,t.value={}}catch{_.add({severity:"error",summary:d("status"),detail:d("error"),life:3e3})}else try{await b.post("/references/tqm-area",t.value),V(),_.add({severity:"success",summary:d("status"),detail:d("success"),life:3e3}),v.value=!1,t.value={}}catch{_.add({severity:"error",summary:d("status"),detail:d("error"),life:3e3})}},E=async a=>{const s=await b.get(`/references/tqm-area/${a.id}`);t.value=s.data,v.value=!0},P=a=>{t.value.id=a,f.value=!0},j=async()=>{try{await b.delete(`/references/tqm-area/${t.value.id}`),f.value=!1,t.value={},_.add({severity:"success",summary:d("status"),detail:d("success"),life:3e3}),V()}catch{_.add({severity:"error",summary:d("status"),detail:d("error"),life:3e3})}},x=()=>{S.value.exportCSV()};return(a,s)=>{var D,N;const H=m("Toolbar"),L=m("InputIcon"),z=m("InputText"),O=m("IconField"),h=m("Column"),Q=m("DataTable"),w=m("Button"),M=m("Dialog");return g(),$("div",J,[e("div",K,[e("div",Y,[o(H,{class:"mb-4"},{start:n(()=>[e("div",X,[e("button",{class:"o-button o-button-secondary",onClick:s[0]||(s[0]=l=>x(l))},[Z,u(" "+i(a.$t("save")),1)])])]),end:n(()=>[e("button",{class:"o-button o-button-success",onClick:A},[ee,u(i(a.$t("add")),1)])]),_:1}),o(Q,{ref_key:"dt",ref:S,filters:k.value,"onUpdate:filters":s[2]||(s[2]=l=>k.value=l),value:(N=(D=q.value)==null?void 0:D.data)==null?void 0:N.data,paginator:"",rows:10,dataKey:"id",loading:C.value,globalFilterFields:["uz","oz","ru","id"]},{header:n(()=>[e("div",te,[e("h5",ae,i(a.$t("tqm_polygon")),1),o(O,null,{default:n(()=>[o(L,null,{default:n(()=>[le]),_:1}),o(z,{modelValue:k.value.global.value,"onUpdate:modelValue":s[1]||(s[1]=l=>k.value.global.value=l),placeholder:a.$t("search")},null,8,["modelValue","placeholder"])]),_:1})])]),empty:n(()=>[e("div",se,i(a.$t("no_data")),1)]),default:n(()=>[o(h,{header:a.$t("â„–"),headerStyle:"width:14px;"},{body:n(l=>[u(i(l.index+1),1)]),_:1},8,["header"]),o(h,{field:"uz",header:a.$t("uz"),sortable:!0},{body:n(l=>[oe,u(" "+i(l.data.uz),1)]),_:1},8,["header"]),o(h,{field:"oz",header:a.$t("oz"),sortable:!0},{body:n(l=>[ne,u(" "+i(l.data.oz),1)]),_:1},8,["header"]),o(h,{field:"ru",header:a.$t("ru"),sortable:!0},{body:n(l=>[ie,u(" "+i(l.data.ru),1)]),_:1},8,["header"]),o(h,{header:a.$t("actions"),headerStyle:"min-width:10rem;"},{body:n(l=>[e("button",{class:"o-button o-button-warning mr-2",onClick:T=>E(l.data)},re,8,de),e("button",{class:"o-button o-button-danger",onClick:T=>P(l.data.id)},ve,8,ce)]),_:1},8,["header"])]),_:1},8,["filters","value","loading"]),o(M,{visible:v.value,"onUpdate:visible":s[6]||(s[6]=l=>v.value=l),style:{width:"750px"},header:t.value.id?a.$t("edit"):a.$t("add"),modal:!0,class:"p-fluid"},{footer:n(()=>[o(w,{label:a.$t("cancel"),icon:"pi pi-times",class:"text-red-400",text:"",onClick:B},null,8,["label"]),o(w,{label:a.$t("save"),icon:"pi pi-check",text:"",onClick:F},null,8,["label"])]),default:n(()=>{var l,T,U;return[e("div",_e,[e("div",pe,[e("label",fe,[u(i(a.$t("oz")),1),he]),o(z,{id:"oz",modelValue:t.value.name1,"onUpdate:modelValue":s[3]||(s[3]=y=>t.value.name1=y),modelModifiers:{trim:!0},required:"true",invalid:r.value&&!((l=t.value.name1)!=null&&l.length)},null,8,["modelValue","invalid"]),r.value&&!t.value.name1?(g(),$("small",ye,i(a.$t("field_required")),1)):I("",!0)]),e("div",be,[e("label",ge,[u(i(a.$t("ru")),1),$e]),o(z,{id:"ru",modelValue:t.value.name2,"onUpdate:modelValue":s[4]||(s[4]=y=>t.value.name2=y),modelModifiers:{trim:!0},required:"true",invalid:r.value&&!((T=t.value.name2)!=null&&T.length)},null,8,["modelValue","invalid"]),r.value&&!t.value.name2?(g(),$("small",ke,i(a.$t("field_required")),1)):I("",!0)])]),e("div",Ce,[e("div",Ve,[e("label",ze,[u(i(a.$t("uz")),1),we]),o(z,{id:"uz",modelValue:t.value.name3,"onUpdate:modelValue":s[5]||(s[5]=y=>t.value.name3=y),modelModifiers:{trim:!0},required:"true",invalid:r.value&&!((U=t.value.name3)!=null&&U.length)},null,8,["modelValue","invalid"]),r.value&&!t.value.name3?(g(),$("small",Te,i(a.$t("field_required")),1)):I("",!0)])])]}),_:1},8,["visible","header"]),o(M,{visible:f.value,"onUpdate:visible":s[8]||(s[8]=l=>f.value=l),style:{width:"450px"},header:a.$t("confirmation"),modal:!0},{footer:n(()=>[o(w,{label:"No",icon:"pi pi-times",text:"",onClick:s[7]||(s[7]=l=>f.value=!1)}),o(w,{label:"Yes",icon:"pi pi-check",text:"",onClick:j})]),default:n(()=>[e("div",Ie,[Se,t.value?(g(),$("span",qe,[u(i(a.$t("are_you_sure_to_delete_this_item"))+" ",1),e("b",null,i(t.value.name),1)])):I("",!0)])]),_:1},8,["visible","header"])])])])}}};export{Ue as default};
