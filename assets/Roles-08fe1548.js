import{m as W,u as J,r as c,o as K,a as y,f as m,b as g,c as $,g as e,i as o,n as i,G as d,t as n,l as T,E as h}from"./index-aae41fd2.js";const Y={class:"grid"},x={class:"col-12"},X={class:"card"},Z={class:"my-2"},ee=e("i",{class:"pi pi-upload mr-1"},null,-1),te=e("i",{class:"pi pi-plus mr-1"},null,-1),le={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},ae={class:"m-0"},se=e("i",{class:"pi pi-search"},null,-1),oe={class:"text-center"},ne=e("span",{class:"p-column-title"},"uz",-1),ie=e("span",{class:"p-column-title"},"oz",-1),ue=e("span",{class:"p-column-title"},"ru",-1),de=e("span",{class:"p-column-title"},"turn",-1),re=["onClick"],ce=e("i",{class:"pi pi-pencil"},null,-1),me=[ce],ve=["onClick"],pe=e("i",{class:"pi pi-trash mr-1"},null,-1),_e=[pe],fe={class:"field grid"},he={class:"col-6"},be={for:"oz"},ye=e("span",{style:{color:"#ff5050"}},"*",-1),ge={key:0,class:"p-invalid"},$e={class:"col-6"},Ve={for:"ru"},ke=e("span",{style:{color:"#ff5050"}},"*",-1),Ce={key:0,class:"p-invalid"},Ie={class:"field grid"},we={class:"col-6"},ze={for:"uz"},Te=e("span",{style:{color:"#ff5050"}},"*",-1),Se={key:0,class:"p-invalid"},Me={class:"col-6"},Ne={for:"turn"},De={class:"flex align-items-center justify-content-center"},Ue=e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),qe={key:0},Ee={__name:"Roles",setup(Ae){const _=W(),{t:u,locale:Be}=J(),V=c({global:{value:null,matchMode:h.CONTAINS},name:{value:null,matchMode:h.STARTS_WITH},"country.name":{value:null,matchMode:h.STARTS_WITH},representative:{value:null,matchMode:h.IN},status:{value:null,matchMode:h.EQUALS},verified:{value:null,matchMode:h.EQUALS}}),v=c(!1),b=c(!1),t=c({});c(null);const S=c(null),r=c(!1),k=c(!1),M=c([]);K(async()=>{await C()}),JSON.parse(localStorage.getItem("userData"));async function C(l){try{k.value=!0;let s="/references/roles";M.value=await y.get(s),k.value=!1}catch{k.value=!1}}const A=()=>{t.value={name1:"",name2:"",name3:"",turn:null},r.value=!1,v.value=!0},B=()=>{v.value=!1,r.value=!1},F=async()=>{if(r.value=!0,!!t.value.name1&&t.value.name2&&t.value.name3)if(t.value.id)try{await y.put(`/references/roles/${t.value.id}`,t.value),C(t.value.id),_.add({severity:"success",summary:u("status"),detail:u("success"),life:3e3}),v.value=!1,t.value={}}catch{_.add({severity:"error",summary:u("status"),detail:u("error"),life:3e3})}else try{await y.post("/references/roles",t.value),C(),_.add({severity:"success",summary:u("status"),detail:u("success"),life:3e3}),v.value=!1,t.value={}}catch{_.add({severity:"error",summary:u("status"),detail:u("error"),life:3e3})}},E=async l=>{const s=await y.get(`/references/roles/${l.id}`);t.value=s.data,v.value=!0},P=l=>{t.value.id=l,b.value=!0},R=async()=>{try{await y.delete(`/references/roles/${t.value.id}`),b.value=!1,t.value={},_.add({severity:"success",summary:u("status"),detail:u("success"),life:3e3}),C()}catch{_.add({severity:"error",summary:u("status"),detail:u("error"),life:3e3})}},j=()=>{S.value.exportCSV()};return(l,s)=>{var D,U;const G=m("Toolbar"),H=m("InputIcon"),I=m("InputText"),L=m("IconField"),f=m("Column"),O=m("DataTable"),Q=m("InputNumber"),w=m("Button"),N=m("Dialog");return g(),$("div",Y,[e("div",x,[e("div",X,[o(G,{class:"mb-4"},{start:i(()=>[e("div",Z,[e("button",{class:"o-button o-button-secondary",onClick:s[0]||(s[0]=a=>j(a))},[ee,d(" "+n(l.$t("save")),1)])])]),end:i(()=>[e("button",{class:"o-button o-button-success",onClick:A},[te,d(n(l.$t("add")),1)])]),_:1}),o(O,{ref_key:"dt",ref:S,filters:V.value,"onUpdate:filters":s[2]||(s[2]=a=>V.value=a),value:(U=(D=M.value)==null?void 0:D.data)==null?void 0:U.data,paginator:"",rows:10,dataKey:"id",loading:k.value,globalFilterFields:["uz","oz","ru","id"]},{header:i(()=>[e("div",le,[e("h5",ae,n(l.$t("roles")),1),o(L,null,{default:i(()=>[o(H,null,{default:i(()=>[se]),_:1}),o(I,{modelValue:V.value.global.value,"onUpdate:modelValue":s[1]||(s[1]=a=>V.value.global.value=a),placeholder:l.$t("search")},null,8,["modelValue","placeholder"])]),_:1})])]),empty:i(()=>[e("div",oe,n(l.$t("no_data")),1)]),default:i(()=>[o(f,{header:l.$t("â„–"),headerStyle:"width:14px;"},{body:i(a=>[d(n(a.index+1),1)]),_:1},8,["header"]),o(f,{field:"uz",header:l.$t("uz"),sortable:!0},{body:i(a=>[ne,d(" "+n(a.data.uz),1)]),_:1},8,["header"]),o(f,{field:"oz",header:l.$t("oz"),sortable:!0},{body:i(a=>[ie,d(" "+n(a.data.oz),1)]),_:1},8,["header"]),o(f,{field:"ru",header:l.$t("ru"),sortable:!0},{body:i(a=>[ue,d(" "+n(a.data.ru),1)]),_:1},8,["header"]),o(f,{field:"turn",header:l.$t("turn"),sortable:!0},{body:i(a=>[de,d(" "+n(a.data.turn),1)]),_:1},8,["header"]),o(f,{header:l.$t("actions"),headerStyle:"min-width:10rem;"},{body:i(a=>[e("button",{class:"o-button o-button-warning mr-2",onClick:z=>E(a.data)},me,8,re),e("button",{class:"o-button o-button-danger",onClick:z=>P(a.data.id)},_e,8,ve)]),_:1},8,["header"])]),_:1},8,["filters","value","loading"]),o(N,{visible:v.value,"onUpdate:visible":s[7]||(s[7]=a=>v.value=a),style:{width:"750px"},header:t.value.id?l.$t("edit"):l.$t("add"),modal:!0,class:"p-fluid"},{footer:i(()=>[o(w,{label:l.$t("cancel"),icon:"pi pi-times",class:"text-red-400",text:"",onClick:B},null,8,["label"]),o(w,{label:l.$t("save"),icon:"pi pi-check",text:"",onClick:F},null,8,["label"])]),default:i(()=>{var a,z,q;return[e("div",fe,[e("div",he,[e("label",be,[d(n(l.$t("oz")),1),ye]),o(I,{id:"oz",modelValue:t.value.name1,"onUpdate:modelValue":s[3]||(s[3]=p=>t.value.name1=p),modelModifiers:{trim:!0},required:"true",invalid:r.value&&!((a=t.value.name1)!=null&&a.length)},null,8,["modelValue","invalid"]),r.value&&!t.value.name1?(g(),$("small",ge,n(l.$t("field_required")),1)):T("",!0)]),e("div",$e,[e("label",Ve,[d(n(l.$t("ru")),1),ke]),o(I,{id:"ru",modelValue:t.value.name2,"onUpdate:modelValue":s[4]||(s[4]=p=>t.value.name2=p),modelModifiers:{trim:!0},required:"true",invalid:r.value&&!((z=t.value.name2)!=null&&z.length)},null,8,["modelValue","invalid"]),r.value&&!t.value.name2?(g(),$("small",Ce,n(l.$t("field_required")),1)):T("",!0)])]),e("div",Ie,[e("div",we,[e("label",ze,[d(n(l.$t("uz")),1),Te]),o(I,{id:"uz",modelValue:t.value.name3,"onUpdate:modelValue":s[5]||(s[5]=p=>t.value.name3=p),modelModifiers:{trim:!0},required:"true",invalid:r.value&&!((q=t.value.name3)!=null&&q.length)},null,8,["modelValue","invalid"]),r.value&&!t.value.name3?(g(),$("small",Se,n(l.$t("field_required")),1)):T("",!0)]),e("div",Me,[e("label",Ne,n(l.$t("turn")),1),o(Q,{inputId:"withoutgrouping",useGrouping:!1,fluid:"",id:"turn",modelValue:t.value.turn,"onUpdate:modelValue":s[6]||(s[6]=p=>t.value.turn=p),modelModifiers:{trim:!0}},null,8,["modelValue"])])])]}),_:1},8,["visible","header"]),o(N,{visible:b.value,"onUpdate:visible":s[9]||(s[9]=a=>b.value=a),style:{width:"450px"},header:l.$t("confirmation"),modal:!0},{footer:i(()=>[o(w,{label:"No",icon:"pi pi-times",text:"",onClick:s[8]||(s[8]=a=>b.value=!1)}),o(w,{label:"Yes",icon:"pi pi-check",text:"",onClick:R})]),default:i(()=>[e("div",De,[Ue,t.value?(g(),$("span",qe,[d(n(l.$t("are_you_sure_to_delete_this_item"))+" ",1),e("b",null,n(t.value.name),1)])):T("",!0)])]),_:1},8,["visible","header"])])])])}}};export{Ee as default};
