import{m as R,u as W,r as c,o as G,a as b,f as v,b as g,c as $,g as e,i as o,n,G as u,t as i,l as I,E as _}from"./index-aae41fd2.js";const J={class:"grid"},K={class:"col-12"},Y={class:"card"},X={class:"my-2"},Z=e("i",{class:"pi pi-upload mr-1"},null,-1),ee=e("i",{class:"pi pi-plus mr-1"},null,-1),te={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},le={class:"m-0"},ae=e("i",{class:"pi pi-search"},null,-1),se={class:"text-center"},oe=e("span",{class:"p-column-title"},"uz",-1),ne=e("span",{class:"p-column-title"},"oz",-1),ie=e("span",{class:"p-column-title"},"ru",-1),de=["onClick"],ue=e("i",{class:"pi pi-pencil"},null,-1),re=[ue],ce=["onClick"],ve=e("i",{class:"pi pi-trash mr-1"},null,-1),me=[ve],pe={class:"field grid"},_e={class:"col-6"},fe={for:"oz"},he=e("span",{style:{color:"#ff5050"}},"*",-1),ye={key:0,class:"p-invalid"},be={class:"col-6"},ge={for:"ru"},$e=e("span",{style:{color:"#ff5050"}},"*",-1),ke={key:0,class:"p-invalid"},Ce={class:"field grid"},Ve={class:"col-6"},ze={for:"uz"},we=e("span",{style:{color:"#ff5050"}},"*",-1),Te={key:0,class:"p-invalid"},Ie={class:"flex align-items-center justify-content-center"},Se=e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Me={key:0},qe={__name:"EduTypes",setup(De){const p=R(),{t:d,locale:Ne}=W(),k=c({global:{value:null,matchMode:_.CONTAINS},name:{value:null,matchMode:_.STARTS_WITH},"country.name":{value:null,matchMode:_.STARTS_WITH},representative:{value:null,matchMode:_.IN},status:{value:null,matchMode:_.EQUALS},verified:{value:null,matchMode:_.EQUALS}}),m=c(!1),f=c(!1),t=c({});c(null);const S=c(null),r=c(!1),C=c(!1),M=c([]);G(async()=>{await V()}),JSON.parse(localStorage.getItem("userData"));async function V(l){try{C.value=!0;let s="/edu/refs/types";M.value=await b.get(s),C.value=!1}catch{C.value=!1}}const A=()=>{t.value={name1:"",name2:"",name3:""},r.value=!1,m.value=!0},B=()=>{m.value=!1,r.value=!1},E=async()=>{if(r.value=!0,!!t.value.name1&&t.value.name2&&t.value.name3)if(t.value.id)try{await b.put(`/edu/refs/types/${t.value.id}`,t.value),V(t.value.id),p.add({severity:"success",summary:d("status"),detail:d("success"),life:3e3}),m.value=!1,t.value={}}catch{p.add({severity:"error",summary:d("status"),detail:d("error"),life:3e3})}else try{await b.post("/edu/refs/types",t.value),V(),p.add({severity:"success",summary:d("status"),detail:d("success"),life:3e3}),m.value=!1,t.value={}}catch{p.add({severity:"error",summary:d("status"),detail:d("error"),life:3e3})}},F=async l=>{const s=await b.get(`/edu/refs/types/${l.id}`);t.value=s.data,m.value=!0},P=l=>{t.value.id=l,f.value=!0},j=async()=>{try{await b.delete(`/edu/refs/types/${t.value.id}`),f.value=!1,t.value={},p.add({severity:"success",summary:d("status"),detail:d("success"),life:3e3}),V()}catch{p.add({severity:"error",summary:d("status"),detail:d("error"),life:3e3})}},x=()=>{S.value.exportCSV()};return(l,s)=>{var N,U;const H=v("Toolbar"),L=v("InputIcon"),z=v("InputText"),O=v("IconField"),h=v("Column"),Q=v("DataTable"),w=v("Button"),D=v("Dialog");return g(),$("div",J,[e("div",K,[e("div",Y,[o(H,{class:"mb-4"},{start:n(()=>[e("div",X,[e("button",{class:"o-button o-button-secondary",onClick:s[0]||(s[0]=a=>x(a))},[Z,u(" "+i(l.$t("save")),1)])])]),end:n(()=>[e("button",{class:"o-button o-button-success",onClick:A},[ee,u(i(l.$t("add")),1)])]),_:1}),o(Q,{ref_key:"dt",ref:S,filters:k.value,"onUpdate:filters":s[2]||(s[2]=a=>k.value=a),value:(U=(N=M.value)==null?void 0:N.data)==null?void 0:U.data,paginator:"",rows:10,dataKey:"id",loading:C.value,globalFilterFields:["uz","oz","ru","id"]},{header:n(()=>[e("div",te,[e("h5",le,i(l.$t("school_type")),1),o(O,null,{default:n(()=>[o(L,null,{default:n(()=>[ae]),_:1}),o(z,{modelValue:k.value.global.value,"onUpdate:modelValue":s[1]||(s[1]=a=>k.value.global.value=a),placeholder:l.$t("search")},null,8,["modelValue","placeholder"])]),_:1})])]),empty:n(()=>[e("div",se,i(l.$t("no_data")),1)]),default:n(()=>[o(h,{header:l.$t("â„–"),headerStyle:"width:14px;"},{body:n(a=>[u(i(a.index+1),1)]),_:1},8,["header"]),o(h,{field:"uz",header:l.$t("uz"),sortable:!0},{body:n(a=>[oe,u(" "+i(a.data.uz),1)]),_:1},8,["header"]),o(h,{field:"oz",header:l.$t("oz"),sortable:!0},{body:n(a=>[ne,u(" "+i(a.data.oz),1)]),_:1},8,["header"]),o(h,{field:"ru",header:l.$t("ru"),sortable:!0},{body:n(a=>[ie,u(" "+i(a.data.ru),1)]),_:1},8,["header"]),o(h,{header:l.$t("actions"),headerStyle:"min-width:10rem;"},{body:n(a=>[e("button",{class:"o-button o-button-warning mr-2",onClick:T=>F(a.data)},re,8,de),e("button",{class:"o-button o-button-danger",onClick:T=>P(a.data.id)},me,8,ce)]),_:1},8,["header"])]),_:1},8,["filters","value","loading"]),o(D,{visible:m.value,"onUpdate:visible":s[6]||(s[6]=a=>m.value=a),style:{width:"750px"},header:t.value.id?l.$t("edit"):l.$t("add"),modal:!0,class:"p-fluid"},{footer:n(()=>[o(w,{label:l.$t("cancel"),icon:"pi pi-times",class:"text-red-400",text:"",onClick:B},null,8,["label"]),o(w,{label:l.$t("save"),icon:"pi pi-check",text:"",onClick:E},null,8,["label"])]),default:n(()=>{var a,T,q;return[e("div",pe,[e("div",_e,[e("label",fe,[u(i(l.$t("oz")),1),he]),o(z,{id:"oz",modelValue:t.value.name1,"onUpdate:modelValue":s[3]||(s[3]=y=>t.value.name1=y),modelModifiers:{trim:!0},required:"true",invalid:r.value&&!((a=t.value.name1)!=null&&a.length)},null,8,["modelValue","invalid"]),r.value&&!t.value.name1?(g(),$("small",ye,i(l.$t("field_required")),1)):I("",!0)]),e("div",be,[e("label",ge,[u(i(l.$t("ru")),1),$e]),o(z,{id:"ru",modelValue:t.value.name2,"onUpdate:modelValue":s[4]||(s[4]=y=>t.value.name2=y),modelModifiers:{trim:!0},required:"true",invalid:r.value&&!((T=t.value.name2)!=null&&T.length)},null,8,["modelValue","invalid"]),r.value&&!t.value.name2?(g(),$("small",ke,i(l.$t("field_required")),1)):I("",!0)])]),e("div",Ce,[e("div",Ve,[e("label",ze,[u(i(l.$t("uz")),1),we]),o(z,{id:"uz",modelValue:t.value.name3,"onUpdate:modelValue":s[5]||(s[5]=y=>t.value.name3=y),modelModifiers:{trim:!0},required:"true",invalid:r.value&&!((q=t.value.name3)!=null&&q.length)},null,8,["modelValue","invalid"]),r.value&&!t.value.name3?(g(),$("small",Te,i(l.$t("field_required")),1)):I("",!0)])])]}),_:1},8,["visible","header"]),o(D,{visible:f.value,"onUpdate:visible":s[8]||(s[8]=a=>f.value=a),style:{width:"450px"},header:l.$t("confirmation"),modal:!0},{footer:n(()=>[o(w,{label:"No",icon:"pi pi-times",text:"",onClick:s[7]||(s[7]=a=>f.value=!1)}),o(w,{label:"Yes",icon:"pi pi-check",text:"",onClick:j})]),default:n(()=>[e("div",Ie,[Se,t.value?(g(),$("span",Me,[u(i(l.$t("are_you_sure_to_delete_this_item"))+" ",1),e("b",null,i(t.value.name),1)])):I("",!0)])]),_:1},8,["visible","header"])])])])}}};export{qe as default};
